{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport _axios from '@/axios/myaxios';\nconst options = {\n  watch: {\n    searchTeacherName(val) {\n      this.getTeacherList();\n    }\n  },\n  data() {\n    return {\n      showTeacherVo: false,\n      pageSize: 10,\n      count: 0,\n      searchTeacherName: \"\",\n      currentPage: 1,\n      teacherList: [],\n      courseId: 17,\n      teacherVo: {}\n    };\n  },\n  methods: {\n    removeCoverUrl(file, fileList) {\n      var params = new URLSearchParams();\n      params.append(\"coverUrl\", this.coverUrl);\n      _axios.delete(\"/images/delete?\" + params).then(resp => {\n        if (resp.data.code !== 1) {\n          this.$message({\n            message: '删除失败',\n            type: 'error'\n          });\n          return false;\n        } else {\n          this.coverUrl = \"\";\n        }\n      });\n    },\n    handleAvatarSuccess(res) {\n      this.teacherVo.avatar = res.data;\n      this.teacherVo = JSON.parse(JSON.stringify(this.teacherVo));\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 10;\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 10MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    updateTeacher() {\n      _axios.post(\"/teacher/update\", this.teacherVo).then(resp => {\n        if (resp.data.code == 0) {\n          this.$message.error(resp.data.msg);\n        } else {\n          this.$message({\n            message: '添加成功',\n            type: 'success'\n          });\n          this.getTeacherList();\n          this.showTeacherVo = false;\n        }\n      });\n    },\n    clearTeacherVo() {\n      this.teacherVo = {};\n    },\n    CurrentChange(val) {\n      this.currentPage = val;\n      this.getTeacherList();\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.getCourseList();\n    },\n    getTeacher(id) {\n      _axios.get(\"/teacher/one/\" + id).then(resp => {\n        this.teacherVo = resp.data.data;\n        this.showTeacherVo = true;\n      });\n    },\n    removeTeacher(id) {\n      _axios.delete(\"/teacher/remove/\" + id).then(resp => {\n        this.$message({\n          message: '移除成功',\n          type: 'success'\n        });\n      });\n    },\n    getTeacherList() {\n      var params = new URLSearchParams();\n      params.append(\"pageSize\", this.pageSize);\n      params.append(\"currentPage\", this.currentPage);\n      params.append(\"searchName\", this.searchTeacherName);\n      _axios.get(\"/teacher/all?\" + params).then(resp => {\n        this.teacherList = resp.data.data.records;\n        this.count = resp.data.data.count;\n      });\n    }\n  },\n  mounted() {\n    this.getTeacherList();\n  }\n};\nexport default options;","map":{"version":3,"names":["_axios","options","watch","searchTeacherName","val","getTeacherList","data","showTeacherVo","pageSize","count","currentPage","teacherList","courseId","teacherVo","methods","removeCoverUrl","file","fileList","params","URLSearchParams","append","coverUrl","delete","then","resp","code","$message","message","type","handleAvatarSuccess","res","avatar","JSON","parse","stringify","beforeAvatarUpload","isJPG","isLt2M","size","error","updateTeacher","post","msg","clearTeacherVo","CurrentChange","handleSizeChange","getCourseList","getTeacher","id","get","removeTeacher","records","mounted"],"sources":["src/views/TeacherListView.vue"],"sourcesContent":["<template>\r\n    <div data-v-38e7a12e class=\"workspace\">\r\n        <div data-v-38e7a12e class=\"banner\">\r\n            <span data-v-38e7a12e class=\"primary-title\">教师</span>\r\n            <el-button @click=\"showTeacherVo = true\" data-v-38e7a12e type=\"primary\" round class=\"btn-add\" size=\"medium\">\r\n                <i class=\"iconfont\" style=\"padding: 10px 3px 0 0\">&#xe608;</i>新增教师\r\n            </el-button>\r\n        </div>\r\n        <div data-v-38e7a12e class=\"searcher\">\r\n            <el-input style=\"width: 300px;\" data-v-38e7a12e placeholder=\"教师姓名\" suffix-icon=\"el-icon-search\"\r\n                v-model=\"searchTeacherName\">\r\n            </el-input>\r\n        </div>\r\n        <el-table data-v-38e7a12e class=\"dataList\" :data=\"teacherList\" border style=\"width: 100%\">\r\n            <el-table-column align=\"center\" prop=\"name\" label=\"姓名\">\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"school\" label=\"学校\">\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"avatar\" label=\"头像\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-avatar :src=\"scope.row.avatar\"></el-avatar>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"job\" label=\"职位\">\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"department\" label=\"专业\">\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <div class=\"cell\">\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"getTeacher(scope.row.tid)\">修改</el-button>\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"removeTeacher(scope.row.tid)\">移除</el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div data-v-38e7a12e class=\"dataList-pagination\">\r\n            <div data-v-665e07ad data-v-38e7a12e class=\"pagination-container\">\r\n                <el-pagination @current-chang=\"CurrentChange\" @size-change=\"handleSizeChange\" background\r\n                    layout=\"total,sizes, prev, pager, next\" :page-sizes=\"[10, 20, 30, 40]\" :total=\"count\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n        <el-dialog @close=\"clearTeacherVo()\" title=\"课程时间\" :visible.sync=\"showTeacherVo\" width=\"500px\">\r\n            <el-form label-width=\"80px\" size=\"medium\">\r\n                <el-form-item label=\"姓名\">\r\n                    <el-input style=\"width: 280px;\" placeholder=\"请输入教师姓名\" v-model=\"teacherVo.name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"学校\">\r\n                    <el-input style=\"width: 280px;\" placeholder=\"请输入课程名称\" v-model=\"teacherVo.school\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"头像\">\r\n                    <el-upload class=\"avatar-uploader\" action=\"api/images/upload\" name=\"image\"\r\n                        :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\r\n                        <img v-if=\"teacherVo.avatar != '' && teacherVo.avatar\" :on-remove=\"removeCoverUrl\"\r\n                         :src=\"teacherVo.avatar\" class=\"avatar\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </el-form-item>\r\n                <el-form-item label=\"职位\">\r\n                    <el-input style=\"width: 280px;\" placeholder=\"请输入职位\" v-model=\"teacherVo.job\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"系别\">\r\n                    <el-input style=\"width: 280px;\" placeholder=\"请输入系别\" v-model=\"teacherVo.department\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"简介\">\r\n                    <el-input style=\"width: 280px;\" placeholder=\"请输入简介\" v-model=\"teacherVo.descr\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"showTeacherVo = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"updateTeacher()\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport _axios from '@/axios/myaxios'\r\nconst options = {\r\n    watch:{\r\n        searchTeacherName(val){\r\n            this.getTeacherList()\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            showTeacherVo:false,\r\n            pageSize:10,\r\n            count:0,\r\n            searchTeacherName:\"\",\r\n            currentPage:1,\r\n            teacherList:[],\r\n            courseId:17,\r\n            teacherVo:{}\r\n        }\r\n    },\r\n    methods: {\r\n        removeCoverUrl(file, fileList){\r\n            var params = new URLSearchParams\r\n            params.append(\"coverUrl\",this.coverUrl)\r\n            _axios.delete(\"/images/delete?\"+params).then(resp => {\r\n                if(resp.data.code !==1){\r\n                    this.$message({\r\n                        message: '删除失败',\r\n                        type: 'error'\r\n                    });\r\n                    return false;\r\n                }else{\r\n                    this.coverUrl = \"\"\r\n                    \r\n                }\r\n            })\r\n        },\r\n        handleAvatarSuccess(res){\r\n            this.teacherVo.avatar = res.data\r\n            this.teacherVo = JSON.parse(JSON.stringify(this.teacherVo))\r\n        },\r\n        beforeAvatarUpload(file) {\r\n            const isJPG = file.type === 'image/jpeg';\r\n            const isLt2M = file.size / 1024 / 1024 < 10\r\n            if (!isJPG) {\r\n                this.$message.error('上传头像图片只能是 JPG 格式!');\r\n            }\r\n            if (!isLt2M) {\r\n                this.$message.error('上传头像图片大小不能超过 10MB!');\r\n            }\r\n            return isJPG && isLt2M;\r\n        },\r\n        updateTeacher(){\r\n            \r\n            _axios.post(\"/teacher/update\",this.teacherVo).then(resp => {\r\n                \r\n                if(resp.data.code == 0){\r\n                    this.$message.error(resp.data.msg)\r\n                }else{\r\n                    this.$message({\r\n                        message: '添加成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.getTeacherList()\r\n                    this.showTeacherVo = false\r\n                }\r\n            })\r\n        },\r\n        clearTeacherVo(){\r\n            this.teacherVo = {}\r\n        },\r\n        CurrentChange(val){\r\n            this.currentPage = val\r\n            this.getTeacherList()\r\n        },\r\n        handleSizeChange(val){\r\n            this.pageSize = val\r\n            this.getCourseList()\r\n        },\r\n        getTeacher(id){\r\n            _axios.get(\"/teacher/one/\"+id).then(resp => {\r\n                this.teacherVo = resp.data.data\r\n                this.showTeacherVo = true;\r\n            })\r\n        },\r\n        removeTeacher(id){\r\n            _axios.delete(\"/teacher/remove/\"+id).then(resp => {\r\n                this.$message({\r\n                    message: '移除成功',\r\n                    type: 'success'\r\n                });\r\n            })\r\n        },\r\n        getTeacherList(){\r\n            var params = new URLSearchParams \r\n            params.append(\"pageSize\",this.pageSize)\r\n            params.append(\"currentPage\",this.currentPage)\r\n            params.append(\"searchName\",this.searchTeacherName)\r\n            _axios.get(\"/teacher/all?\"+params).then(resp => {\r\n                this.teacherList = resp.data.data.records\r\n                this.count = resp.data.data.count\r\n            })\r\n        },\r\n        \r\n    },\r\n    mounted() {\r\n        this.getTeacherList()\r\n    },\r\n\r\n}\r\nexport default options;\r\n</script>\r\n<style scoped>\r\n.workspace .el-table th.el-table__cell{\r\n    background-color: #cdfbf8;\r\n}\r\n\r\n</style>\r\n<style scoped>\r\n\r\n.dataList-pagination[data-v-38e7a12e] {\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n.pagination-container[data-v-665e07ad] {\r\n    background: #fff;\r\n    padding: 32px 16px;\r\n}\r\n\r\n\r\n.dataList[data-v-38e7a12e] {\r\n    margin-top: 16px;\r\n}\r\n\r\n.searcher div[data-v-2871ab58] {\r\n    width: 218px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.workspace {\r\n    margin-top: 16px;\r\n    width: 1200px;\r\n    min-height: 550px;\r\n    padding: 32px;\r\n    background-color: #e7f2eea4;\r\n}\r\n.workspace .primary-title {\r\n    height: 33px;\r\n    font-size: 24px;\r\n    font-family: PingFangSC-Medium, PingFang SC;\r\n    font-weight: 500;\r\n    color: #003153;\r\n    line-height: 33px;\r\n}\r\n.workspace .banner .btn-add[data-v-38e7a12e] {\r\n    float: right;\r\n}\r\n.searcher[data-v-38e7a12e] {\r\n    margin-top: 16px;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>"],"mappings":";;;AA6EA,OAAAA,MAAA;AACA,MAAAC,OAAA;EACAC,KAAA;IACAC,kBAAAC,GAAA;MACA,KAAAC,cAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,aAAA;MACAC,QAAA;MACAC,KAAA;MACAN,iBAAA;MACAO,WAAA;MACAC,WAAA;MACAC,QAAA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,eAAAC,IAAA,EAAAC,QAAA;MACA,IAAAC,MAAA,OAAAC,eAAA;MACAD,MAAA,CAAAE,MAAA,kBAAAC,QAAA;MACArB,MAAA,CAAAsB,MAAA,qBAAAJ,MAAA,EAAAK,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAlB,IAAA,CAAAmB,IAAA;UACA,KAAAC,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA;QACA;UACA,KAAAP,QAAA;QAEA;MACA;IACA;IACAQ,oBAAAC,GAAA;MACA,KAAAjB,SAAA,CAAAkB,MAAA,GAAAD,GAAA,CAAAxB,IAAA;MACA,KAAAO,SAAA,GAAAmB,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,SAAA,MAAArB,SAAA;IACA;IACAsB,mBAAAnB,IAAA;MACA,MAAAoB,KAAA,GAAApB,IAAA,CAAAY,IAAA;MACA,MAAAS,MAAA,GAAArB,IAAA,CAAAsB,IAAA;MACA,KAAAF,KAAA;QACA,KAAAV,QAAA,CAAAa,KAAA;MACA;MACA,KAAAF,MAAA;QACA,KAAAX,QAAA,CAAAa,KAAA;MACA;MACA,OAAAH,KAAA,IAAAC,MAAA;IACA;IACAG,cAAA;MAEAxC,MAAA,CAAAyC,IAAA,yBAAA5B,SAAA,EAAAU,IAAA,CAAAC,IAAA;QAEA,IAAAA,IAAA,CAAAlB,IAAA,CAAAmB,IAAA;UACA,KAAAC,QAAA,CAAAa,KAAA,CAAAf,IAAA,CAAAlB,IAAA,CAAAoC,GAAA;QACA;UACA,KAAAhB,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,KAAAvB,cAAA;UACA,KAAAE,aAAA;QACA;MACA;IACA;IACAoC,eAAA;MACA,KAAA9B,SAAA;IACA;IACA+B,cAAAxC,GAAA;MACA,KAAAM,WAAA,GAAAN,GAAA;MACA,KAAAC,cAAA;IACA;IACAwC,iBAAAzC,GAAA;MACA,KAAAI,QAAA,GAAAJ,GAAA;MACA,KAAA0C,aAAA;IACA;IACAC,WAAAC,EAAA;MACAhD,MAAA,CAAAiD,GAAA,mBAAAD,EAAA,EAAAzB,IAAA,CAAAC,IAAA;QACA,KAAAX,SAAA,GAAAW,IAAA,CAAAlB,IAAA,CAAAA,IAAA;QACA,KAAAC,aAAA;MACA;IACA;IACA2C,cAAAF,EAAA;MACAhD,MAAA,CAAAsB,MAAA,sBAAA0B,EAAA,EAAAzB,IAAA,CAAAC,IAAA;QACA,KAAAE,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA;IACA;IACAvB,eAAA;MACA,IAAAa,MAAA,OAAAC,eAAA;MACAD,MAAA,CAAAE,MAAA,kBAAAZ,QAAA;MACAU,MAAA,CAAAE,MAAA,qBAAAV,WAAA;MACAQ,MAAA,CAAAE,MAAA,oBAAAjB,iBAAA;MACAH,MAAA,CAAAiD,GAAA,mBAAA/B,MAAA,EAAAK,IAAA,CAAAC,IAAA;QACA,KAAAb,WAAA,GAAAa,IAAA,CAAAlB,IAAA,CAAAA,IAAA,CAAA6C,OAAA;QACA,KAAA1C,KAAA,GAAAe,IAAA,CAAAlB,IAAA,CAAAA,IAAA,CAAAG,KAAA;MACA;IACA;EAEA;EACA2C,QAAA;IACA,KAAA/C,cAAA;EACA;AAEA;AACA,eAAAJ,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}