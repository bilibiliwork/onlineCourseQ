{"ast":null,"code":"var websocket = null;\nclass WebSocketService {\n  connect(url) {\n    //判断当前浏览器是否支持WebSocket\n    if ('WebSocket' in window) {\n      //连接WebSocket节点\n      websocket = new WebSocket(url);\n    } else {\n      alert('Not support websocket');\n    }\n  }\n\n  /* //连接发生错误的回调方法\r\n  websocket.onerror = function () {\r\n      console.log(\"websocket连接错误\")\r\n  };\r\n    //连接成功建立的回调方法\r\n  websocket.onopen = function () {\r\n      console.log(\"websocket连接成功\")\r\n  }\r\n    //接收到消息的回调方法\r\n  websocket.onmessage = function (event) {\r\n      setMessageInnerHTML(event.data);\r\n  }\r\n    //连接关闭的回调方法\r\n  websocket.onclose = function () {\r\n      console.log(\"websocket连接关闭\")\r\n  }\r\n    //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。\r\n  window.onbeforeunload = function () {\r\n      websocket.close();\r\n  } */\n\n  setupEventListeners() {\n    websocket.onerror = error => {\n      console.log(\"websocket连接错误\", error);\n    };\n    websocket.onopen = () => {\n      console.log(\"websocket连接成功\");\n    };\n    websocket.onclose = () => {\n      console.log(\"websocket连接关闭\");\n    };\n  }\n  om() {\n    //接收到消息的回调方法\n    websocket.onmessage = function (event) {\n      setMessageInnerHTML(event.data);\n    };\n  }\n}\nexport default WebSocketService;","map":{"version":3,"names":["websocket","WebSocketService","connect","url","window","WebSocket","alert","setupEventListeners","onerror","error","console","log","onopen","onclose","om","onmessage","event","setMessageInnerHTML","data"],"sources":["C:/Users/90858/Documents/Vscode File/Online Course Web/onlinecourseweb/src/websocket/websocketService.js"],"sourcesContent":["var websocket = null;\r\n\r\nclass WebSocketService {\r\n    connect(url) {\r\n        //判断当前浏览器是否支持WebSocket\r\n        if ('WebSocket' in window) {\r\n            //连接WebSocket节点\r\n            websocket = new WebSocket(url);\r\n        } else {\r\n            alert('Not support websocket')\r\n        }\r\n    }\r\n\r\n    /* //连接发生错误的回调方法\r\n    websocket.onerror = function () {\r\n        console.log(\"websocket连接错误\")\r\n    };\r\n\r\n    //连接成功建立的回调方法\r\n    websocket.onopen = function () {\r\n        console.log(\"websocket连接成功\")\r\n    }\r\n\r\n    //接收到消息的回调方法\r\n    websocket.onmessage = function (event) {\r\n        setMessageInnerHTML(event.data);\r\n    }\r\n\r\n    //连接关闭的回调方法\r\n    websocket.onclose = function () {\r\n        console.log(\"websocket连接关闭\")\r\n    }\r\n\r\n    //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。\r\n    window.onbeforeunload = function () {\r\n        websocket.close();\r\n    } */\r\n\r\n    setupEventListeners() {\r\n        websocket.onerror = (error) => {\r\n            console.log(\"websocket连接错误\", error);\r\n        };\r\n\r\n        websocket.onopen = () => {\r\n            console.log(\"websocket连接成功\");\r\n        };\r\n\r\n        websocket.onclose = () => {\r\n            console.log(\"websocket连接关闭\");\r\n        };\r\n    }\r\n    om() {\r\n        //接收到消息的回调方法\r\n        websocket.onmessage = function (event) {\r\n            setMessageInnerHTML(event.data);\r\n        }\r\n    }\r\n}\r\nexport default WebSocketService;"],"mappings":"AAAA,IAAIA,SAAS,GAAG,IAAI;AAEpB,MAAMC,gBAAgB,CAAC;EACnBC,OAAOA,CAACC,GAAG,EAAE;IACT;IACA,IAAI,WAAW,IAAIC,MAAM,EAAE;MACvB;MACAJ,SAAS,GAAG,IAAIK,SAAS,CAACF,GAAG,CAAC;IAClC,CAAC,MAAM;MACHG,KAAK,CAAC,uBAAuB,CAAC;IAClC;EACJ;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAMIC,mBAAmBA,CAAA,EAAG;IAClBP,SAAS,CAACQ,OAAO,GAAIC,KAAK,IAAK;MAC3BC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,KAAK,CAAC;IACvC,CAAC;IAEDT,SAAS,CAACY,MAAM,GAAG,MAAM;MACrBF,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAChC,CAAC;IAEDX,SAAS,CAACa,OAAO,GAAG,MAAM;MACtBH,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAChC,CAAC;EACL;EACAG,EAAEA,CAAA,EAAG;IACD;IACAd,SAAS,CAACe,SAAS,GAAG,UAAUC,KAAK,EAAE;MACnCC,mBAAmB,CAACD,KAAK,CAACE,IAAI,CAAC;IACnC,CAAC;EACL;AACJ;AACA,eAAejB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}